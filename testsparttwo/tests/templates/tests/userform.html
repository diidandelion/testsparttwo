{% extends 'tests/base.html' %}

{% block title %} GASYR Foundation School Form {% endblock %}

{% block content %}
{% load static %}
<link href="https://fonts.googleapis.com/css?family=Qanelas:400,700" rel="stylesheet">
<style>
    body, input, button, select, label {
        font-family: 'MyCustomFont2', sans-serif;
    }
    body {
        background: #F8F8F8;
        height: 100vh;
        margin: 0;
    }
    .flex {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    .form-container {
        font-size: 18px;
        background: white;
        padding: 30px;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);
        border-radius: 5px;
        max-width: 580px;
        border: 1px solid #ddd;
        position: relative;
        margin-top: 30px;
        width: -webkit-fill-available;
    }
    .form-header {
        text-align: left;
        margin-bottom: 30px;
    }
    .form-header h1 {
        font-size: 22px;
        margin: 0;
    }
    .language-selection {
        display: flex;
        justify-content: start;
        gap: 10px;
    }
    .language-option {
        /*height: 30px;*/
        width: 45%;
        padding: 21px 10px;
        margin: 0;
        border: 1px solid transparent;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
    }
    .language-option:hover, .language-option.active {
        background-color: #BA2025;
        color: white;
        border-color: #BA2025;
    }
    .language-option input[type="radio"] {
        display: none;
    }
    .form-group {
        margin-bottom: 20px;
    }
    label {
        display: block;
        margin-bottom: 5px;
        color: #333;
        font-weight: 400;
        letter-spacing: 0.05em;
    }
    input[type=text], input[type=tel], input[type=email], select, button {
        font-size: 18px;
        width: 100%;
        padding: 22px 24px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }
    ::placeholder {
      color: #BEBEBE;
      opacity: 1; /* Firefox */
    }

    ::-ms-input-placeholder { /* Edge 12 -18 */
      color: red;
    }
    button {
        padding: 28px;
        background: #BA2025;
        color: white;
        border: none;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 4px;
        font-size: 18px;
        font-weight: 600;
        line-height: 25px;
        letter-spacing: 0.2em;
        text-align: center;
        text-transform: uppercase;
    }
    button:hover {
        background: #BA2025;
    }
</style>
<div class="flex">
    <div class="logo" style="width: 190px; height: 190px;">
        <img src="{% static 'tests/images/logo2.svg' %}" alt="Logo" style="width: 100%; height: 100%;">
    </div>


    <div class="form-container">
        <form method="post">
            {% csrf_token %}
            <div class="form-header">
                <label for="id_first_name1">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / –¢—ñ–ª–¥—ñ —Ç–∞–Ω–¥–∞“£—ã–∑</label>
                <div class="language-selection">
                    <label class="language-option active">
                        <input type="radio" name="language" value="RU" id="language_ru" hidden checked>
                        <span>üá∑üá∫ –†—É—Å—Å–∫–∏–π</span>
                    </label>
                    <label class="language-option">
                        <input type="radio" name="language" value="KZ" id="language_kz" hidden>
                        <span>üá∞üáø “ö–∞–∑–∞“õ —Ç—ñ–ª—ñ</span>
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="id_first_name">–ò–º—è</label>
                <input type="text" placeholder="–ê–∫—ã–ª–±–µ–∫" name="first_name" id="id_first_name" required>
            </div>
            <div class="form-group">
                <label for="id_last_name">–§–∞–º–∏–ª–∏—è</label>
                <input type="text" placeholder="–î–æ—Å–±–µ–∫–æ–≤" name="last_name" id="id_last_name" required>
            </div>
            <div class="form-group">
                <label for="id_phone_number">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                <input type="tel" placeholder="+7 ( ___ ) ____ - __ - __" name="phone_number" id="id_phone_number"
                       required>
                <input type="hidden" name="raw_phone_number" id="id_raw_phone_number">
            </div>
            <div class="form-group">
                <label for="id_email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</label>
                <input type="email" placeholder="–í–≤–µ–¥–∏—Ç–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é –ø–æ—á—Ç—É" name="email" id="id_email" required>
            </div>

            <div class="form-group">
                <label for="id_grade">–ö–ª–∞—Å—Å</label>
                <select name="grade" id="id_grade" required>
                    <option value="" id="class_user">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                </select>
            </div>

            <div class="form-group">
                <label for="id_parent_first_name">–ò–º—è —Ä–æ–¥–∏—Ç–µ–ª—è</label>
                <input type="text" name="parent_first_name" id="id_parent_first_name" placeholder="–ê–∫—ã–ª–±–µ–∫" required>
            </div>
            <div class="form-group">
                <label for="id_parent_last_name">–§–∞–º–∏–ª–∏—è —Ä–æ–¥–∏—Ç–µ–ª—è</label>
                <input type="text" name="parent_last_name" id="id_parent_last_name" placeholder="–î–æ—Å–±–µ–∫–æ–≤" required>
            </div>
            <div class="form-group">
                <label for="id_parent_phone_number">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—è</label>
                <input type="tel" name="parent_phone_number" id="id_parent_phone_number"
                       placeholder="+7 ( ___ ) ____ - __ - __" required>
            </div>
            <div class="form-group">
                <label for="id_city">–ì–æ—Ä–æ–¥</label>
                <select name="city" id="id_city" required>
                    <option id="select_city" value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                    <option value="Almaty">–ê–ª–º–∞—Ç—ã</option>
                    <option value="Astana">–ê—Å—Ç–∞–Ω–∞</option>
                    <option value="Shymkent">–®—ã–º–∫–µ–Ω—Ç</option>
                </select>
            </div>
            <button type="submit">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
        </form>
    </div>
</div>
<script>
    document.getElementById('id_phone_number').addEventListener('input', function (e) {
        formatPhoneNumber(e);
    });

    document.getElementById('id_parent_phone_number').addEventListener('input', function (e) {
        formatPhoneNumber(e);
    });

    function formatPhoneNumber(e) {
        var input = e.target.value.replace(/[^\d]/g, ''); // Remove all non-numeric characters

        // Ensure the input starts with '7' (the country code for Kazakhstan)
        if (!input.startsWith('7')) {
            input = '7' + input;
        }

        // Limit the length to 11 digits (including the country code '7')
        input = input.substring(0, 11);

        var formattedInput = '+7 ('; // Start with the country code and opening parenthesis

        // Remove the country code ('7') and then format the rest
        input = input.substring(1); // Remove the '7' to start formatting

        // Dynamically add formatting based on the current length of the input
        for (var i = 0; i < input.length; i++) {
            if (i === 3) {
                formattedInput += ') '; // Close the parenthesis after the area code
            } else if (i === 6 || i === 8) {
                formattedInput += ' - '; // Add dashes after the 6th and 8th digits
            }
            formattedInput += input[i];
        }

        // Update the input field with the dynamically formatted value
        e.target.value = formattedInput;
    }

      document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', () => {
          document.querySelectorAll('.language-option').forEach(opt => opt.classList.remove('active'));
          option.classList.add('active');
        });
      });



      const translations = {
        'RU': {
          'selectLanguage': '–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫',
          'firstName': '–ò–º—è',
          'lastName': '–§–∞–º–∏–ª–∏—è',
          'phoneNumber': '–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞',
          'email': '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞',
          'startTest': '–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
            'grade': '–ö–ª–∞—Å—Å',
        'parentFirstName': '–ò–º—è —Ä–æ–¥–∏—Ç–µ–ª—è',
        'parentLastName': '–§–∞–º–∏–ª–∏—è —Ä–æ–¥–∏—Ç–µ–ª—è',
        'parentPhoneNumber': '–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—è',
        'city': '–ì–æ—Ä–æ–¥',
                    'selectcity': "–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥",
            'classuser': "–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å"

        },
        'KZ': {
        'selectLanguage': '–¢—ñ–ª–¥—ñ —Ç–∞–Ω–¥–∞“£—ã–∑',
        'firstName': '–ê—Ç—ã',
        'lastName': '–¢–µ–≥—ñ',
        'phoneNumber': '“∞—è–ª—ã —Ç–µ–ª–µ—Ñ–æ–Ω',
        'email': '–≠–ª–µ–∫—Ç—Ä–æ–Ω–¥—ã“õ –ø–æ—à—Ç–∞–Ω—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑', // Used for placeholder
        'startTest': '–ë–∞—Å—Ç–∞—É',
        'grade': '–°—ã–Ω—ã–ø',
        'parentFirstName': '–ê—Ç–∞-–∞–Ω–∞–Ω—ã“£ –∞—Ç—ã', // Used for placeholder
        'parentLastName': '–ê—Ç–∞-–∞–Ω–∞–Ω—ã“£ —Ç–µ–≥—ñ', // Used for placeholder
        'parentPhoneNumber': '–ê—Ç–∞-–∞–Ω–∞–Ω—ã“£ —Ç–µ–ª–µ—Ñ–æ–Ω –Ω”©–º—ñ—Ä—ñ',
                'city': '“ö–∞–ª–∞',
            'selectcity': "“ö–∞–ª–∞–Ω—ã —Ç–∞–Ω–¥–∞“£—ã–∑",
            'classuser': "–ö–ª–∞—Å—Å—Ç—ã —Ç–∞–Ω–¥–∞“£—ã–∑"

      }
      };

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
      function updateText(language) {
      // Update static texts
      document.querySelector('label[for="id_first_name1"]').textContent = translations[language]['selectLanguage'];
      document.querySelector('label[for="id_first_name"]').textContent = translations[language]['firstName'];
      document.querySelector('label[for="id_last_name"]').textContent = translations[language]['lastName'];
      document.querySelector('label[for="id_phone_number"]').textContent = translations[language]['phoneNumber'];
      document.querySelector('label[for="id_email"]').textContent = translations[language]['email'];
      document.querySelector('button[type="submit"]').textContent = translations[language]['startTest'];
      document.querySelector('label[for="id_grade"]').textContent = translations[language]['grade'];
      document.querySelector('label[for="id_parent_first_name"]').textContent = translations[language]['parentFirstName'];
      document.querySelector('label[for="id_parent_last_name"]').textContent = translations[language]['parentLastName'];
      document.querySelector('label[for="id_parent_phone_number"]').textContent = translations[language]['parentPhoneNumber'];
      document.querySelector('label[for="id_city"]').textContent = translations[language]['city'];
      document.querySelector('option[id="class_user"]').textContent = translations[language]['classuser'];
      document.querySelector('option[id="select_city"]').textContent = translations[language]['selectcity'];

      document.getElementById('id_email').placeholder = language === 'KZ' ? '–≠–ª–µ–∫—Ç—Ä–æ–Ω–¥—ã“õ –ø–æ—à—Ç–∞–Ω—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑' : translations[language]['email']; // Assuming you want to update this for Kazakh
    }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞
      document.querySelectorAll('.language-option').forEach(option => {
      option.addEventListener('click', function() {
        const selectedLanguage = this.querySelector('input[type="radio"]').value;
        document.querySelectorAll('.language-option').forEach(opt => opt.classList.remove('active'));
        this.classList.add('active');
        updateText(selectedLanguage); // Call to update text and placeholders
      });
    });
</script>
{% endblock %}
